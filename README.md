班级管理系统
============
这是用来练手的数据结构课程设计

原本要求用链表和文件操作写一个可以对学生信息进行增删查改的系统，但总觉得太简单了，不能充分提高自己的能力，
于是就打算用更高级的数据结构，学习（复习）一下Git，用Git来进行版本管理。

### 项目需求：
1. 添加学生
2. 显示所有学生信息
3. 按照姓名查找学生
4. 按照学号查找学生
5. 按照姓名查找并删除学生
6. 按照学号查找并删除学生
7. 按照学号查找并修改学生信息
8. 统计学生人数

学生的信息包括：学号，姓名，语文成绩，数学成绩，英语成绩

### 数据结构设计：
考虑到可能有频繁的查找操作，相比于链表，用二叉搜索树效率更高。为了避免二叉搜索树在顺序插入时退化成链表，采用AVL树存储学生信息。

注意到需求中有关查找的操作都分为按学号查找和按姓名查找。所以AVL树中的每个结点可以维护两个关系，一个是按照学号排序的关系，一个是按照姓名排序的关系。

因此，对于每一个树结点，它应当同时存在于两棵树中，这样不论是按学号查找，还是按姓名查找，时间复杂度都是O(logn)

具体实现上，用三叉链表实现AVL树，一个结点有三个指针，两个指针分别指向它的两个孩子，一个指针指向它的父结点。在插入和删除操作后，还需要进行旋转。由于在本系统中，
一个结点同时存在于两棵树中，所以其实每个结点有六个指针。看起来很复杂，其实大部分情况下可以把两棵树看成是独立的存在，对一棵树的操作不影响另一棵树（除了删除）。

学生信息并不包含成绩排名这一项，但显示学生信息的功能中却需要显示学生的排名。显然刚刚设计的二叉树并不能根据一位学生的成绩直接求出学生的排名，这时应该怎么办呢？

这时我们可以创建一个数组，
这个数组的每一个元素都是一个指向树结点的指针，树有多少个结点，这个数组就有多少个元素。然后可以遍历一遍树（不论是从维护学号关系的树还是维护姓名关系的树开始都可以），
将这棵树的每个结点的指针填入这个数组中。填完后，根据数组元素指向的结点中存储的学生成绩，利用快速排序对数组进行排序，使数组中的学生成绩按从大到小的顺序排列。**注意：
这里排序的是指向树结点的指针，数组中存指针而不是树结点的副本，是为了节省空间**。有了按成绩降序排列的学生列表，就可以求出一个学生的排名了。
首先通过用户输入的学号在树中查找这个学生，然后求出这个学生的总分，再利用这个总分，在指针数组中利用二分查找搜索该学生，之后再特判一下并列排名的情况，就结束了。

这些操作听起来挺复杂的，它们的时间复杂度如何？

首先，创建一个数组需要遍历一遍树，时间复杂度是O(n)，然后，需要对数组进行快速排序，在最坏情况下，时间复杂度是O(n²)，然后对一个学生进行二分查找求出排名，时间复杂度是
O(logn)，所以总的时间复杂度是O(n²+n+logn)。

其实一般情况下快速排序的时间复杂度为O(nlogn)，这样总的时间复杂度就是O(n+nlogn+logn)。虽然不是太好看，但也可以接受。更重要的是，并不是每次查找都要创建数组。
只有在添加学生和删除学生后才需要重新创建数组，单纯的查找的时间复杂度是O(logn)，完全可以接受。

为了提高程序的效率，还做了一些小优化，可以当作彩蛋

至于文件操作这样的功能，用fprintf和fscanf就可以完成了

### 关于调试
在对程序进行调试的过程中，我开始使用以前从没用过的调试方法。
1. 可以在可能出错的地方用__LINE__宏，这个宏可以显示当前代码的行数
2. 使用assert断言，虽然在这个程序中并没有派上什么用场，但还是挺方便的
3. 使用重定向输入输出。一开始程序并没有文件操作功能，每次调试都要自己手动敲一堆测试用例，后来突然想到可以重定向输入，于是就创建了一个文本文件，里面写上测试用例，
要测试的时候直接在命令行里重定向输入就可以了

这个程序中使用了三级指针。在调试的时候，有段代码一直出错，花费大量时间精力排查后发现，这段代码其实没有问题，出问题的是我插入的用来调试的代码，
用来调试的代码中错误地解引用了三级指针，导致程序一直崩溃，而且还查不出来

----------------------------------------------------------

这个程序还是有很多缺点的，比如源代码的文件命名不清楚，功能分割不明确，代码耦合度还是太高，不过应该比我上学期的C语言期末课程设计要好，
虽然现在这个程序的菜单界面一点都不好看。

这个程序中求一个学生排名的部分可以改进
1. 利用名次树可以以O(logn)的时间复杂度找到一个学生的排名，n个学生就是O(nlogn)，这样就没有必要在数组中二分查找了。
2. 按成绩排名显示所有学生信息时，不需要二分查找学生的排名，直接按顺序输出数组中的学生信息就可以了

这个程序不能处理同学重名的情况，如果试图添加一个重名的学生，程序会报错。这个问题涉及整个程序的架构，已经很难修改了。

之后打算用Java再写一个课程设计，这次就要求从一开始就使用Git（现在这个程序是写到一半才开始用Git的），并使用日志（这次的调试给我留下了阴影）
